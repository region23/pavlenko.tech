# Pavlenko.Tech Blog

Современный легковесный генератор статического блога с поддержкой Markdown, оптимизированный для производительности, поисковых систем и удобного обмена контентом.

## Особенности

- **Генерация статического HTML**: Предварительно отрендеренные HTML файлы для оптимальной производительности и SEO
- **Контент в Markdown**: Написание постов в формате Markdown с метаданными в frontmatter
- **Система шаблонов**: Настраиваемые HTML шаблоны
- **Адаптивный дизайн**: Подход "mobile-first" с адаптивными макетами
- **Темная/Светлая тема**: Автоматическое определение предпочтений системы с возможностью ручного переключения
- **Организация по тегам**: Категоризация постов с помощью тегов
- **Расчет времени чтения**: Автоматическая оценка времени чтения статей
- **Telegram Instant View**: Оптимизированный контент для функции Instant View в Telegram
- **Открытый исходный код**: Легко обновляемый движок, отделенный от контента
- **Модульность**: Полное разделение движка и контента для простого обновления и переноса

## Структура проекта

```
├── engine/               # Движок блога (независимый компонент)
│   ├── lib/              # Основная функциональность движка
│   ├── bin/              # CLI интерфейс
│   ├── css/              # CSS стили
│   ├── js/               # JavaScript файлы
│   ├── docs/             # Документация по движку
│   ├── defaults/         # Шаблоны и стили по умолчанию
│   │   ├── templates/    # HTML шаблоны по умолчанию
│   │   ├── css/          # CSS стили по умолчанию
│   │   ├── images/       # Стандартные изображения
│   │   └── config.json   # Стандартная конфигурация
│   ├── memory-bank/      # Информация о проекте
│   ├── .htaccess         # Конфигурация Apache
│   ├── favicon.ico       # Фавиконка
│   ├── _redirects        # Правила переадресации для Netlify
│   └── .nojekyll         # Флаг для GitHub Pages
│
├── blog/                 # Контент блога (сохраняется при обновлении движка)
│   ├── content/          # Markdown контент
│   │   ├── posts/        # Посты блога
│   │   └── about/        # Содержимое страницы "О блоге"
│   ├── templates/        # HTML шаблоны
│   ├── css/              # CSS стили для конкретного блога
│   ├── images/           # Изображения
│   ├── config.json       # Конфигурация сайта
│   └── telegram-iv-template.txt # Шаблон для Telegram Instant View
│
└── dist/                 # Сгенерированный статический сайт (результат)
```

## Начало работы

### Установка существующего блога

1. Клонируйте этот репозиторий
2. Установите зависимости: `npm install`
3. Запустите `npm run dev` для локальной разработки
4. Запустите `npm run build` для генерации статического сайта

### Создание нового блога

1. Установите пакет глобально: `npm install -g markdown-blog-engine`
2. Создайте новую директорию для блога: `mkdir my-blog && cd my-blog`
3. Инициализируйте новый блог: `blog-engine init`
4. Запустите `npm install` для установки зависимостей
5. Запустите `npm run dev` для начала работы

## Повседневное использование блога

### Создание и редактирование постов

1. **Создание нового поста**:
   - Создайте новый файл `.md` в директории `blog/content/posts/`
   - Добавьте необходимые метаданные в формате frontmatter
   - Напишите контент в формате Markdown

   ```markdown
   ---
   title: "Заголовок вашего поста"
   date: "2023-03-23"
   tags: ["разработка", "markdown"]
   summary: "Краткое описание вашего поста"
   author: "Ваше имя"
   ---

   # Заголовок

   Ваш контент в формате markdown...
   ```

2. **Добавление изображений**:
   - Поместите изображения в директорию `blog/images/`
   - Ссылайтесь на них в постах: `![Описание](/images/ваше-изображение.jpg)`

3. **Редактирование страницы "О блоге"**:
   - Отредактируйте файл `blog/content/about/index.md`

### Настройка блога

1. **Редактирование конфигурации**:
   - Отредактируйте файл `blog/config.json` для изменения:
     - Заголовка и описания блога
     - Языка блога
     - Навигационного меню
     - Настроек внешнего вида (цвета, шрифты)
     - Количества постов на странице

2. **Настройка шаблонов**:
   - Отредактируйте файлы в директории `blog/templates/` для изменения HTML структуры
   - Основные шаблоны:
     - `base.html` - Базовый шаблон всех страниц
     - `header.html` - Шапка сайта
     - `footer.html` - Подвал сайта
     - `post.html` - Шаблон отдельного поста
     - `post-card.html` - Шаблон превью поста на главной странице

3. **Настройка стилей**:
   - Отредактируйте файлы в директории `blog/css/` для изменения визуального стиля
   - Основные файлы стилей:
     - `all.css` - Основной файл со всеми компонентами и стилями
     - `generated.css` - CSS переменные (автоматически генерируются из конфигурации)

### Настройка стилей

Стили в блоге построены на модульной структуре из двух основных файлов:

1. **generated.css** - Автоматически генерируется на основе настроек из `blog/config.json`. Содержит CSS переменные для:
   - Цветовой схемы (основные цвета, акцентные цвета, темная тема)
   - Типографики (шрифты, размеры)
   - Отступов и размеров
   - Эффектов и анимаций
   
   > Важно: этот файл не нужно редактировать вручную, все изменения делаются в разделе `appearance` файла `blog/config.json`

2. **all.css** - Основной файл стилей, содержащий все компоненты:
   - Базовые стили и сбросы
   - Типографику
   - Компоненты (кнопки, карточки, навигация)
   - Макеты и сетки
   - Утилиты

Оба файла размещаются в директории `blog/css/` и напрямую подключаются в шаблоне:

```html
<link rel="stylesheet" href="/css/generated.css">
<link rel="stylesheet" href="/css/all.css">
```


### Сборка и публикация

1. **Локальная разработка**:
   - Запустите `npm run dev` для локального предпросмотра блога
   - Доступен по адресу: http://localhost:3000

2. **Сборка для продакшена**:
   - Запустите `npm run build` для генерации статических файлов
   - Результат будет в директории `dist/`

3. **Отладка сборки**:
   - Используйте флаг `--debug` для детальной информации: `npm run build -- --debug`
   - Это выведет пути, используемые при сборке, и прочую отладочную информацию

4. **Публикация блога**:
   - Загрузите содержимое директории `dist/` на ваш хостинг
   - Для GitHub Pages используйте `npm run deploy` (настройте в package.json)
   - Для Netlify/Vercel укажите команду сборки `npm run build` и директорию `dist/`

## Добавление контента

Создавайте Markdown файлы в директории `blog/content/posts/` с метаданными в формате frontmatter:

```markdown
---
title: "Заголовок вашего поста"
date: "ГГГГ-ММ-ДД"
tags: ["тег1", "тег2"]
summary: "Краткое описание вашего поста"
---

Ваш контент в формате markdown...
```

## Скрипты

- `npm run start` - Локальный запуск сгенерированного статического сайта
- `npm run dev` - Сборка сайта и локальный запуск для разработки
- `npm run build` - Генерация статического сайта для продакшена
- `npm run deploy` - Сборка и деплой через git push

## Обновление движка

Движок блога полностью отделен от контента, что позволяет легко обновлять его без потери пользовательских данных:

1. Обновите код в директории `engine/`
2. Запустите `npm install` для обновления зависимостей
3. Запустите `npm run build` для проверки работоспособности

Ваш контент в директории `blog/` останется неизменным при обновлении движка.

## Расширение функциональности

1. **Добавление новых шаблонов**:
   - Создайте новые HTML файлы в директории `blog/templates/`
   - Используйте их в коде движка или через существующие шаблоны

2. **Добавление новых стилей**:
   - Создайте новые CSS файлы в директории `blog/css/`
   - При необходимости импортируйте их в шаблон HTML или объедините с файлом `all.css`

3. **Создание плагинов**:
   - Разрабатывайте функциональность в отдельных JS файлах в директории `engine/lib/`
   - Интегрируйте их с основными компонентами движка

## Конфигурация

Сайт настраивается через файл `blog/config.json`:

```json
{
  "site": {
    "title": "Название вашего блога",
    "description": "Описание вашего блога",
    "language": "ru"
  },
  "navigation": {
    "items": [
      {"label": "Блог", "url": "/"},
      {"label": "Теги", "url": "/tags"},
      {"label": "О блоге", "url": "/about"}
    ]
  },
  "appearance": {
    "colors": {
      "primary": "#18181b",
      "accent": "#3b82f6"
    },
    "fonts": {
      "main": "Inter",
      "code": "JetBrains Mono"
    }
  }
}
```

## Лицензия

MIT 