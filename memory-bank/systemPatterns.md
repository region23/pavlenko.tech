# System Patterns: Архитектура блога

## Общая архитектура
Блог построен как статический SPA (Single Page Application) с клиентской маршрутизацией. Все данные статей хранятся в виде Markdown-файлов, которые обрабатываются как при сборке (для индекса), так и при запросе страницы (для содержимого).

## Ключевые компоненты
1. **Хранение контента**
   - Markdown-файлы с frontmatter для метаданных
   - Структурированная файловая система (`/content/posts/`, `/content/about/`)
   - JSON-индекс для быстрого доступа к списку статей

2. **Клиентская часть**
   - Чистый JavaScript без фреймворков
   - Модульная структура JS-файлов
   - Обработка Markdown на стороне клиента
   - SPA-маршрутизация с History API

3. **Автоматизация**
   - Node.js скрипт для генерации индекса
   - GitHub Actions для запуска скрипта при каждом пуше
   - GitHub Actions для автоматического деплоя на GitHub Pages
   - Автоматический коммит обновленного индекса

4. **SEO и навигация**
   - Настраиваемые заголовки страниц
   - Файл 404.html для обработки несуществующих страниц
   - Файл .htaccess для правил перенаправления
   - Файл _redirects для хостингов, поддерживающих этот формат

## Рабочие процессы

### Добавление новой статьи
1. Создание .md файла в `/content/posts/`
2. Заполнение frontmatter (заголовок, дата, теги и т.д.)
3. Написание содержания статьи в формате Markdown
4. Коммит и пуш в репозиторий
5. GitHub Actions автоматически обновляет индекс
6. GitHub Pages обновляет сайт с новым контентом

### Обработка статьи для отображения
1. Загрузка `index.json` при инициализации сайта
2. Маршрутизатор определяет запрошенную статью по URL
3. Запрос соответствующего .md файла
4. Разбор frontmatter и рендеринг Markdown
5. Отображение статьи на странице

### Процесс деплоя
1. Пуш изменений в репозиторий
2. GitHub Actions запускает скрипт обновления индекса
3. Обновленный index.json коммитится в репозиторий
4. GitHub Pages собирает и публикует обновленную версию

## Технические решения

### Работа с Markdown
- Использование чистого Markdown без расширений
- Разбор frontmatter для извлечения метаданных
- Генерация slug на основе имени файла или явного указания

### Обновление индекса
- Сканирование всех .md файлов в директории posts
- Извлечение метаданных из frontmatter
- Сортировка статей по дате (новые сначала)
- Сохранение в `index.json`

### Маршрутизация
- Использование клиентской маршрутизации через History API
- Паттерны URL: `/` (главная), `/posts/:slug` (статья), `/about` (о блоге)
- Обработка 404 ошибок для несуществующих страниц 