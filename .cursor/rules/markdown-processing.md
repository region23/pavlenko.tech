# Правила и стандарты обработки Markdown в проекте

## Общие принципы

- Используем для разметки статей чистый Markdown без HTML, когда это возможно
- Для клиентского рендеринга и генерации статических файлов используем библиотеку `marked` версии 15.x
- Применяем расширения `marked-smartypants` для типографики и `marked-gfm-heading-id` для оглавления

## Форматирование кода

- Блоки кода оформляем через тройные обратные кавычки с указанием языка
- Встроенный код выделяем одинарными обратными кавычками
- Подсветка синтаксиса реализуется на стороне клиента
- Приоритет именования языков: `js`, `javascript`, `html`, `css`, `bash`, `sh`, `json`, `markdown`, `md`

## Заголовки

- Используем систему заголовков с # (от h1 до h4)
- Главный заголовок статьи (h1) указываем в frontmatter и не повторяем в тексте
- Для автоматического оглавления используем заголовки h2 и h3
- Каждый заголовок получает автоматический ID, соответствующий его тексту в стиле GitHub

## Изображения

- Храним изображения в директории `/images/` или поддиректориях по темам
- Указываем обязательно альтернативный текст для всех изображений
- Для поддержки Telegram Instant View добавляем описательный alt-текст, который будет использоваться как подпись
- Используем относительные пути к изображениям (они будут автоматически преобразованы для IV)

## Ссылки

- Для внутренних ссылок используем относительные пути
- Для внешних ссылок указываем полный URL с протоколом https
- Для якорных ссылок внутри страницы используем синтаксис `[Текст](#id-заголовка)`

## Специальные элементы

### Цитаты

- Оформляем цитаты с помощью `>` в начале строки
- Для вложенных цитат используем `>>` (многоуровневые кавычки)
- Источник цитаты оформляем курсивом в конце блока цитаты

### Списки

- Используем `-` для маркированных списков (единообразие во всех статьях)
- Для нумерованных списков используем `1.`, `2.` и т.д.
- Поддерживаем вложенные списки с правильными отступами (4 пробела)

### Таблицы

- Используем стандартный Markdown-синтаксис для таблиц
- Выравнивание столбцов указываем при необходимости (`:---`, `:---:`, `---:`)
- Избегаем сложных таблиц с объединением ячеек (не поддерживается в Markdown)

## Frontmatter

- Каждая статья начинается с frontmatter в формате YAML между `---`
- Обязательные поля: `title`, `date`, `description`, `tags`
- Дополнительные поля: `author`, `image`, `slug`, `draft`
- Для полей со специальными символами используем кавычки

## Типографика и специальные символы

- Используем маркдаун-совместимые типографические символы:
  - Тире: `---` для длинного тире (—), `--` для среднего тире (–)
  - Кавычки: обычные `"` и `'` будут преобразованы в типографские через marked-smartypants
  - Многоточие: `...` (будет преобразовано в …)

## Адаптация для Telegram IV

- Избегаем использования HTML-вставок для лучшей совместимости с IV
- Не используем iframe, canvas и другие интерактивные элементы
- Для видео добавляем статическую картинку и ссылку на источник
- При необходимости использования сложных элементов предусматриваем альтернативное отображение

## Рекомендуемый процесс написания статей

1. Создайте новый файл в директории `/content/posts/`
2. Добавьте frontmatter с метаданными статьи
3. Структурируйте статью с помощью заголовков (h2, h3, h4)
4. Используйте стандартные Markdown-элементы для форматирования
5. Добавьте изображения в соответствующую директорию
6. Проверьте статью локально через npm start
7. При необходимости проверьте как статья будет выглядеть в Telegram IV 